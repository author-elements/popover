var AuthorPopupElement=function(){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var e;window.hasOwnProperty("AuthorBaseElement")||(console.error('[ERROR] <author-popup> Required dependency "AuthorBaseElement" not found.'),console.info("AuthorBaseElement is available at https://github.com/author-elements/base")),0<(e=Array.from(new Set([])).filter(function(e){return!customElements.get(e)})).length&&(console.error("[ERROR] <author-popup> Required dependenc".concat(1!==e.length?"ies":"y"," not found: ").concat(e.map(function(e){return"<".concat(e,">")}).join(", ").replace(", "+e[e.length-1]," and "+e[e.length-1]))),e.forEach(function(e,t){return console.info("".concat(t+1,". <").concat(e,"> is available at ").concat("https://github.com/author-elements/popup".replace("popup",e.replace("author-",""))))}));var t=function(e){function n(){var a,e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e=this,t=i(n).call(this,'<template><style>@charset "UTF-8"; :host{display:block}:host *,:host :after,:host :before{box-sizing:border-box}author-popup{display:block}author-popup *,author-popup :after,author-popup :before{box-sizing:border-box}</style><slot></slot></template>'),(a=!t||"object"!=typeof t&&"function"!=typeof t?c(e):t).UTIL.defineProperties({annotatedElement:{private:!0,readonly:!0,get:function(){return document.getElementById(a.getAttribute("for"))||null}},hidden:{private:!0,default:!0},position:{private:!0,default:["left","bottom"]},validPositions:{readonly:!0,private:!0,default:["left","center","right","top","bottom"]},validModes:{private:!0,readonly:!0,default:["hover","click","programmatic"]}}),a.UTIL.defineAttributes({mode:"programmatic"}),a.UTIL.definePrivateMethods({annotatedElementEnterHandler:function(e){e.defaultPrevented||a.show()},annotatedElementLeaveHandler:function(e){e.defaultPrevented||a.hide()},pointerenterHandler:function(e){a.on("annotated-element.enter",a.PRIVATE.annotatedElementEnterHandler),a.off("annotated-element.leave",a.PRIVATE.annotatedElementLeaveHandler),a.UTIL.setStyleProperty("visibilityRule"),a.emit({name:"annotated-element.enter",cfg:{cancelable:!0}})},pointerleaveHandler:function(e){a.off("annotated-element.enter",a.PRIVATE.annotatedElementEnterHandler),a.on("annotated-element.leave",a.PRIVATE.annotatedElementLeaveHandler),a.emit({name:"annotated-element.leave",cfg:{cancelable:!0}})},applyHoverListeners:function(){a.PRIVATE.annotatedElement&&(a.PRIVATE.annotatedElement.addEventListener("pointerenter",a.PRIVATE.pointerenterHandler),a.PRIVATE.annotatedElement.addEventListener("pointerleave",a.PRIVATE.pointerleaveHandler))},removeHoverListeners:function(){a.off("annotated-element.enter",a.PRIVATE.annotatedElementEnterHandler),a.off("annotated-element.leave",a.PRIVATE.annotatedElementLeaveHandler),a.PRIVATE.annotatedElement&&(a.PRIVATE.annotatedElement.removeEventListener("pointerenter",a.PRIVATE.pointerenterHandler),a.PRIVATE.annotatedElement.removeEventListener("pointerleave",a.PRIVATE.pointerleaveHandler))},applyClickListeners:function(){a.PRIVATE.annotatedElement&&a.PRIVATE.annotatedElement.addEventListener("click",a.PRIVATE.clickHandler)},removeClickListeners:function(){document.removeEventListener("click",a.PRIVATE.documentClickHandler),a.PRIVATE.annotatedElement&&a.PRIVATE.annotatedElement.removeEventListener("click",a.PRIVATE.clickHandler)},clickHandler:function(e){e.stopPropagation(),a.hidden?a.show():a.hide()},documentClickHandler:function(e){e.target===c(a)||a.contains(e.target)||a.hide()}}),a.UTIL.registerListeners(c(a),{"attribute.change":function(e){var t=e.detail,n=t.attribute,o=t.oldValue,r=t.newValue;if(r!==o)switch(n){case"mode":switch(a.hide(),a.PRIVATE.removeHoverListeners(),a.PRIVATE.removeClickListeners(),r){case"hover":return a.PRIVATE.applyHoverListeners();case"click":return a.PRIVATE.applyClickListeners();default:a.UTIL.throwError({message:'Invalid mode "'.concat(r,'". Valid modes: "').concat(a.PRIVATE.validModes.join('", "'),'"')})}}},connected:function(){switch(a.UTIL.insertStyleRules({positionRule:":host {}",visibilityRule:":host {}"}),a.hide(),a.mode){case"hover":return a.PRIVATE.applyHoverListeners();case"click":return a.PRIVATE.applyClickListeners();default:a.UTIL.throwError({message:'Invalid mode "'.concat(newValue,'". Valid modes: "').concat(a.PRIVATE.validModes.join('", "'),'"')})}}}),a}var t,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,AuthorBaseElement(HTMLElement)),t=n,r=[{key:"observedAttributes",get:function(){return["for","position","mode"]}}],(o=[{key:"hide",value:function(){this.PRIVATE.styleRules.hasOwnProperty("visibilityRule")&&("click"===this.mode&&document.removeEventListener("click",this.PRIVATE.documentClickHandler),this.UTIL.setStyleProperty("visibilityRule","display","none"),this.PRIVATE.hidden=!0)}},{key:"show",value:function(){"click"===this.mode&&document.addEventListener("click",this.PRIVATE.documentClickHandler),this.UTIL.removeStyleProperty("visibilityRule","display"),this.PRIVATE.hidden=!1}},{key:"annotatedElement",get:function(){return this.PRIVATE.annotatedElement}},{key:"hidden",get:function(){return this.PRIVATE.hidden},set:function(e){e?this.hide():this.show()}}])&&a(t.prototype,o),r&&a(t,r),n}();return customElements.define("author-popup",t),t}();
//# sourceMappingURL=author-popup.es5.min.js.map
