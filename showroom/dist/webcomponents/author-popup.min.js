var AuthorPopupElement=function(){"use strict";window.hasOwnProperty("AuthorBaseElement")||(console.error('[ERROR] <author-popup> Required dependency "AuthorBaseElement" not found.'),console.info("AuthorBaseElement is available at https://github.com/author-elements/base")),function(){let e=Array.from(new Set([])).filter(e=>!customElements.get(e));e.length>0&&(console.error(`[ERROR] <author-popup> Required dependenc${1!==e.length?"ies":"y"} not found: ${e.map(e=>`<${e}>`).join(", ").replace(", "+e[e.length-1]," and "+e[e.length-1])}`),e.forEach((e,t)=>console.info(`${t+1}. <${e}> is available at ${"https://github.com/author-elements/popup".replace("popup",e.replace("author-",""))}`)))}();class e extends(AuthorBaseElement(HTMLElement)){constructor(){super('<template><style>@charset "UTF-8"; :host{display:block}:host *,:host :after,:host :before{box-sizing:border-box}author-popup{display:block}author-popup *,author-popup :after,author-popup :before{box-sizing:border-box}</style><slot></slot></template>'),this.UTIL.defineProperties({annotatedElement:{private:!0,readonly:!0,get:()=>document.getElementById(this.getAttribute("for"))||null},hidden:{private:!0,default:!0},position:{private:!0,default:["left","bottom"]},validPositions:{readonly:!0,private:!0,default:["left","center","right","top","bottom"]},validModes:{private:!0,readonly:!0,default:["hover","click","programmatic"]}}),this.UTIL.defineAttributes({mode:"programmatic"}),this.UTIL.definePrivateMethods({annotatedElementEnterHandler:e=>{e.defaultPrevented||this.show()},annotatedElementLeaveHandler:e=>{e.defaultPrevented||this.hide()},pointerenterHandler:e=>{this.on("annotated-element.enter",this.PRIVATE.annotatedElementEnterHandler),this.off("annotated-element.leave",this.PRIVATE.annotatedElementLeaveHandler),this.UTIL.setStyleProperty("visibilityRule"),this.emit({name:"annotated-element.enter",cfg:{cancelable:!0}})},pointerleaveHandler:e=>{this.off("annotated-element.enter",this.PRIVATE.annotatedElementEnterHandler),this.on("annotated-element.leave",this.PRIVATE.annotatedElementLeaveHandler),this.emit({name:"annotated-element.leave",cfg:{cancelable:!0}})},applyHoverListeners:()=>{this.PRIVATE.annotatedElement.addEventListener("pointerenter",this.PRIVATE.pointerenterHandler),this.PRIVATE.annotatedElement.addEventListener("pointerleave",this.PRIVATE.pointerleaveHandler)},removeHoverListeners:()=>{this.off("annotated-element.enter",this.PRIVATE.annotatedElementEnterHandler),this.off("annotated-element.leave",this.PRIVATE.annotatedElementLeaveHandler),this.PRIVATE.annotatedElement.removeEventListener("pointerenter",this.PRIVATE.pointerenterHandler),this.PRIVATE.annotatedElement.removeEventListener("pointerleave",this.PRIVATE.pointerleaveHandler)},applyClickListeners:()=>{this.PRIVATE.annotatedElement.addEventListener("click",this.PRIVATE.clickHandler)},removeClickListeners:()=>{document.removeEventListener("click",this.PRIVATE.documentClickHandler),this.PRIVATE.annotatedElement.removeEventListener("click",this.PRIVATE.clickHandler)},clickHandler:e=>{e.stopPropagation(),this.hidden?this.show():this.hide()},documentClickHandler:e=>{e.target===this||this.contains(e.target)||this.hide()}}),this.UTIL.registerListeners(this,{"attribute.change":e=>{let{attribute:t,oldValue:n,newValue:i}=e.detail;if(i!==n)switch(t){case"mode":switch(this.hide(),this.PRIVATE.removeHoverListeners(),this.PRIVATE.removeClickListeners(),i){case"hover":return this.PRIVATE.applyHoverListeners();case"click":return this.PRIVATE.applyClickListeners();default:this.UTIL.throwError({message:`Invalid mode "${i}". Valid modes: "${this.PRIVATE.validModes.join('", "')}"`})}}},connected:()=>{this.UTIL.insertStyleRules({positionRule:":host {}",visibilityRule:":host {}"}),this.hide()}})}static get observedAttributes(){return["for","position","mode"]}get annotatedElement(){return this.PRIVATE.annotatedElement}get hidden(){return this.PRIVATE.hidden}set hidden(e){e?this.hide():this.show()}hide(){this.PRIVATE.styleRules.hasOwnProperty("visibilityRule")&&("click"===this.mode&&document.removeEventListener("click",this.PRIVATE.documentClickHandler),this.UTIL.setStyleProperty("visibilityRule","display","none"),this.PRIVATE.hidden=!0)}show(){"click"===this.mode&&document.addEventListener("click",this.PRIVATE.documentClickHandler),this.UTIL.removeStyleProperty("visibilityRule","display"),this.PRIVATE.hidden=!1}}return customElements.define("author-popup",e),e}();
//# sourceMappingURL=author-popup.min.js.map
