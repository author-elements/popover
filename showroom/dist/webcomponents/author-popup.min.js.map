{"version":3,"file":"author-popup.min.js","sources":["../src/element.js"],"sourcesContent":["class AuthorPopupElement extends AuthorBaseElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineProperties({\n      annotatedElement: {\n        private: true,\n        readonly: true,\n        get: () => document.getElementById(this.getAttribute('for')) || null\n      },\n\n      position: {\n        private: true,\n        default: []\n      },\n\n      positionValues: {\n        readonly: true,\n        private: true,\n        default: ['left', 'center', 'right', 'top', 'bottom']\n      }\n    })\n\n    this.UTIL.defineAttributes({\n      hidden: true,\n\n      position: {\n        default: 'center top',\n\n        get: () => this.PRIVATE.position ? this.PRIVATE.position.join(' ') : null,\n\n        set: value => {\n          let { positionValues } = this.PRIVATE\n          let array = value.trim().split(' ')\n\n          this.PRIVATE.position = array.filter(term => {\n            let isValid = positionValues.includes(term)\n\n            if (!isValid) {\n              this.UTIL.printToConsole(`Invalid position value \"${term}\". Accepted values: ${this.PRIVATE.positionValues.join(', ')}`, 'error')\n            }\n\n            return isValid\n          })\n        }\n      }\n    })\n\n    this.UTIL.definePrivateMethods({\n      annotatedElementEnterHandler: evt => {\n        if (evt.defaultPrevented) {\n          return\n        }\n\n        this.show()\n      },\n\n      annotatedElementLeaveHandler: evt => {\n        if (evt.defaultPrevented) {\n          return\n        }\n\n        this.hide()\n      }\n    })\n\n    this.UTIL.registerListeners(this, {\n      connected: () => {\n        this.hide()\n\n        if (!this.PRIVATE.annotatedElement) {\n          return\n        }\n\n        this.UTIL.registerListeners(this.PRIVATE.annotatedElement, {\n          pointerenter: evt => {\n            this.on('annotated-element.enter', this.PRIVATE.annotatedElementEnterHandler)\n            this.off('annotated-element.leave', this.PRIVATE.annotatedElementLeaveHandler)\n\n            this.emit({\n              name: 'annotated-element.enter',\n              cfg: {\n                cancelable: true\n              }\n            })\n          },\n\n          pointerleave: evt => {\n            this.off('annotated-element.enter', this.PRIVATE.annotatedElementEnterHandler)\n            this.on('annotated-element.leave', this.PRIVATE.annotatedElementLeaveHandler)\n\n            this.emit({\n              name: 'annotated-element.leave',\n              cfg: {\n                cancelable: true\n              }\n            })\n          }\n        })\n      }\n    })\n  }\n\n  static get observedAttributes () {\n    return ['for', 'hidden', 'position']\n  }\n\n  get annotatedElement () {\n    return this.PRIVATE.annotatedElement\n  }\n\n  get isHidden () {\n    return this.hasAttribute('hidden')\n  }\n\n  get isVisible () {\n    return !this.isHidden\n  }\n\n  hide () {\n    this.setAttribute('hidden', '')\n  }\n\n  show () {\n    this.removeAttribute('hidden')\n  }\n}\n\ncustomElements.define('author-popup', AuthorPopupElement)\n\nexport default AuthorPopupElement\n"],"names":["AuthorPopupElement","AuthorBaseElement","HTMLElement","[object Object]","super","this","UTIL","defineProperties","annotatedElement","private","readonly","get","document","getElementById","getAttribute","position","default","positionValues","defineAttributes","hidden","PRIVATE","join","set","value","array","trim","split","filter","term","isValid","includes","printToConsole","definePrivateMethods","annotatedElementEnterHandler","evt","defaultPrevented","show","annotatedElementLeaveHandler","hide","registerListeners","connected","pointerenter","on","off","emit","name","cfg","cancelable","pointerleave","observedAttributes","isHidden","hasAttribute","isVisible","setAttribute","removeAttribute","customElements","define"],"mappings":"wrBAAA,MAAMA,UAA2BC,kBAAkBC,cACjDC,cACEC,MAAM,0VAENC,KAAKC,KAAKC,iBAAiB,CACzBC,iBAAkB,CAChBC,SAAS,EACTC,UAAU,EACVC,IAAK,IAAMC,SAASC,eAAeR,KAAKS,aAAa,SAAW,MAGlEC,SAAU,CACRN,SAAS,EACTO,QAAS,IAGXC,eAAgB,CACdP,UAAU,EACVD,SAAS,EACTO,QAAS,CAAC,OAAQ,SAAU,QAAS,MAAO,aAIhDX,KAAKC,KAAKY,iBAAiB,CACzBC,QAAQ,EAERJ,SAAU,CACRC,QAAS,aAETL,IAAK,IAAMN,KAAKe,QAAQL,SAAWV,KAAKe,QAAQL,SAASM,KAAK,KAAO,KAErEC,IAAKC,IACH,IAAIN,eAAEA,GAAmBZ,KAAKe,QAC1BI,EAAQD,EAAME,OAAOC,MAAM,KAE/BrB,KAAKe,QAAQL,SAAWS,EAAMG,OAAOC,IACnC,IAAIC,EAAUZ,EAAea,SAASF,GAMtC,OAJKC,GACHxB,KAAKC,KAAKyB,0CAA0CH,wBAA2BvB,KAAKe,QAAQH,eAAeI,KAAK,QAAS,SAGpHQ,QAMfxB,KAAKC,KAAK0B,qBAAqB,CAC7BC,6BAA8BC,IACxBA,EAAIC,kBAIR9B,KAAK+B,QAGPC,6BAA8BH,IACxBA,EAAIC,kBAIR9B,KAAKiC,UAITjC,KAAKC,KAAKiC,kBAAkBlC,KAAM,CAChCmC,UAAW,KACTnC,KAAKiC,OAEAjC,KAAKe,QAAQZ,kBAIlBH,KAAKC,KAAKiC,kBAAkBlC,KAAKe,QAAQZ,iBAAkB,CACzDiC,aAAcP,IACZ7B,KAAKqC,GAAG,0BAA2BrC,KAAKe,QAAQa,8BAChD5B,KAAKsC,IAAI,0BAA2BtC,KAAKe,QAAQiB,8BAEjDhC,KAAKuC,KAAK,CACRC,KAAM,0BACNC,IAAK,CACHC,YAAY,MAKlBC,aAAcd,IACZ7B,KAAKsC,IAAI,0BAA2BtC,KAAKe,QAAQa,8BACjD5B,KAAKqC,GAAG,0BAA2BrC,KAAKe,QAAQiB,8BAEhDhC,KAAKuC,KAAK,CACRC,KAAM,0BACNC,IAAK,CACHC,YAAY,WAS1BE,gCACE,MAAO,CAAC,MAAO,SAAU,YAG3BzC,uBACE,OAAOH,KAAKe,QAAQZ,iBAGtB0C,eACE,OAAO7C,KAAK8C,aAAa,UAG3BC,gBACE,OAAQ/C,KAAK6C,SAGf/C,OACEE,KAAKgD,aAAa,SAAU,IAG9BlD,OACEE,KAAKiD,gBAAgB,kBAIzBC,eAAeC,OAAO,eAAgBxD"}